var FollowingService=function(){return{follow:function(t,e,n){$.post("/api/followings/",{FolloweeId:t}).done(e).fail(n)},unfollow:function(t,e,n){$.ajax({url:"/api/followings/"+t,type:"DELETE"}).done(e).fail(n)}}}(),LikeService=function(){return{like:function(t,e,n,o){$.ajax({url:"/api/likes/",type:"POST",data:JSON.stringify({TweetId:t,UserId:e}),contentType:"application/json"}).done(n).fail(o)},cancelLike:function(t,e,n){$.ajax({url:"/api/likes/"+t,method:"DELETE"}).done(e).fail(n)}}}(),notificationService=function(){return{getNotifications:function(){$.getJSON("api/notifications",function(t){0!=t.length&&$(".js-notifications-count").text(t.length).removeClass("hide").addClass("animated bounceInDown")})}}}(),ReplyService=function(){return{createReply:function(t,e,n,o,i){$.ajax({url:"/api/replies/",type:"POST",data:JSON.stringify({TweetId:t,ReplyContent:e,UserId:n}),contentType:"application/json"}).done(o).fail(i)}}}(),RetweetService=function(){return{retweet:function(t,e,n,o){$.ajax({url:"/api/retweets/",type:"POST",data:JSON.stringify({TweetId:t,UserId:e}),contentType:"application/json"}).done(n).fail(o)},cancelRetweet:function(t,e,n){$.ajax({url:"/api/retweets/"+t,method:"DELETE"}).done(e).fail(n)}}}(),FollowingController=function(t){var e,n=function(t){$(t).on("click",".js-follow",o)},o=function(n){e=$(n.target);var o=e.attr("followee-id");e.hasClass("follow")?t.follow(o,i,a):t.unfollow(o,i,a)},i=function(){var t="Following"==e.text()?"Follow":"Following";e.toggleClass("following").toggleClass("follow").text(t)},a=function(){alert("Something went wrong!")};return{init:n}}(FollowingService),LikesController=function(t){var e,n=function(t){$(t).on("click",".js-like",o)},o=function(n){e=$(n.target);var o=e.attr("data-tweet-id"),l=e.attr("data-user-id");console.log(l),e.hasClass("like")?t.like(o,l,i,a):t.cancelLike(o,i,a)},i=function(){var t="Liked"==e.text()?"Like":"Liked";e.toggleClass("liked").toggleClass("like").text(t)},a=function(){alert("Something went wrong!")};return{init:n}}(LikeService),NotificationController=function(t){return{init:function(){t.getNotifications()}}}(notificationService),ReplyController=function(t){var e,n=function(n){e=$(n.target),bootbox.dialog({title:"Reply to "+e.attr("data-username")+"'s tweet",message:"<textarea class = 'form-control content' id='reply-content' style='min-width: 100%; resize:none' rows='5'></textarea>",buttons:{no:{label:"Cancel",className:"btn-default",callback:function(){bootbox.hideAll()}},yes:{label:"Reply",className:"btn-info",callback:function(){t.createReply(e.attr("data-tweet-id"),$("#reply-content").val(),e.attr("data-user-id"),o,i)}}}})},o=function(){},i=function(){};return{init:function(t){$(t).on("click",".js-reply",n)}}}(ReplyService),ReportsController=function(){var t,e=function(e){t=$(e.target),bootbox.dialog({message:"Are you sure that you want to report "+t.attr("data-username")+"'s tweet?",title:"Confirm",buttons:{no:{label:"No",className:"btn-default",callback:function(){bootbox.hideAll()}},yes:{label:"Yes",className:"btn-danger",callback:function(){$.post("/api/reports",{TweetId:t.attr("data-tweet-id")}).done(function(){t.parents("tr").fadeOut(function(){$(this).remove()})}).fail(function(){alert("Something went wrong!")})}}}})};return{init:function(t){$(t).on("click",".js-report",e)}}}(),RetweetsController=function(t){var e,n=function(t){$(t).on("click",".js-retweet",o)},o=function(n){e=$(n.target);var o=e.attr("data-tweet-id"),l=e.attr("data-user-id");e.hasClass("retweet")?t.retweet(o,l,i,a):t.cancelRetweet(o,i,a)},i=function(){var t="Retweeted"==e.text()?"Retweet":"Retweeted";e.toggleClass("retweeted").toggleClass("retweet").text(t)},a=function(){alert("Something went wrong!")};return{init:n}}(RetweetService);